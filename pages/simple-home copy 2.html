<!DOCTYPE html>
<html lang="en" x-data>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0078d4">
    <title>Account Overview - Whalet</title>
    <!-- 引入 Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- 引入 Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- 引入字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- 引入图标 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入common.css -->
    <link rel="stylesheet" href="../styles/common.css">
    <!-- 引入自定义样式 -->
    <link rel="stylesheet" href="../styles/my-assets.css">
    <style>
        body {
            background-color: #f9fafb;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1.5rem 1rem;
        }
        @media (min-width: 640px) {
            .container {
                padding: 1.5rem;
            }
        }
        @media (min-width: 1024px) {
            .container {
                padding: 1.5rem 2rem;
            }
        }
        .tab-btn {
            border-bottom: 2px solid transparent;
            color: #6b7280;
        }
        .tab-btn:hover {
            color: #374151;
            border-bottom-color: #d1d5db;
        }
        .tab-btn.active {
            border-bottom: 2px solid #4f46e5;
            color: #4f46e5;
        }

        /* 用户中心下拉菜单样式 */
        #userCenterDropdown {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transform-origin: top right;
            transition: all 0.2s ease-out;
        }

        #userCenterDropdown.hidden {
            display: none;
        }

        #userCenterDropdown.opacity-0 {
            opacity: 0;
            transform: translateY(-0.5rem);
        }

        #userCenterDropdown.opacity-100 {
            opacity: 1;
            transform: translateY(0);
        }

        /* 导航栏样式 */
        .nav-container {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .nav-border {
            border-bottom: 1px solid #e5e7eb;
        }

        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .gradient-card {
            background: linear-gradient(135deg, #7D33FF 0%, #5B24B3 100%);
            color: white;
        }

        .stats-value {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1.2;
        }

        .chart-container {
            position: relative;
            height: 130px;
            width: 130px;
            margin-top: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }

        .legend-item:hover {
            background-color: #f3f4f6;
        }

        .table-header {
            background-color: #f8fafc;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .currency-row {
            transition: all 0.2s ease;
        }

        .currency-row:hover {
            background-color: #f3f4f6;
        }

        .currency-flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .btn-white-transparent {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            backdrop-filter: blur(8px);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
            font-size: 0.875rem;
        }

        .btn-white-transparent:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .currency-toggle {
            transition: transform 0.2s;
        }

        .currency-toggle.rotate {
            transform: rotate(180deg);
        }
        
        /* 自定义滚动条样式 */
        .overflow-y-auto::-webkit-scrollbar {
            width: 4px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* 币种项样式 */
        .currency-item {
            transition: all 0.2s ease;
        }
        
        .currency-item:hover {
            background-color: #f9fafb;
            border-color: #e5e7eb;
        }

        /* 导航栏悬停样式 */
        .text-gray-600:hover,
        .hover\:text-blue-600:hover,
        button.text-gray-600:hover,
        a.text-gray-600:hover,
        .text-gray-400:hover {
            color: #7D33FF !important;
        }
        
        /* 图标悬停样式 */
        button:hover i,
        a:hover i {
            color: #7D33FF !important;
        }
        
        /* 下拉菜单悬停样式 */
        .hover\:bg-gray-100:hover {
            color: #7D33FF !important;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto">
        <!-- 资产内容 -->
        <div id="assets-content" class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <!-- 用户数量统计板块 -->
            <section class="lg:col-span-3 bg-white rounded-xl shadow-sm p-4">
                <div class="flex flex-col h-full">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="p-2 rounded-lg bg-blue-100">
                            <i class="fas fa-users text-lg text-blue-600"></i>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-800">Customer Count</h3>
                            <p class="text-xs text-gray-500">Total Customers</p>
                        </div>
                    </div>
                    <div class="flex-1 flex flex-col justify-end text-center">
                        <div class="text-2xl font-bold text-gray-900">1,248</div>
                        <div class="text-xs text-green-600">+12 today</div>
                    </div>
                </div>
            </section>

            <!-- VA数量统计板块 -->
            <section class="lg:col-span-3 bg-white rounded-xl shadow-sm p-4">
                <div class="flex flex-col h-full">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="p-2 rounded-lg bg-purple-100">
                            <i class="fas fa-credit-card text-lg text-purple-600"></i>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-800">VA Count</h3>
                            <p class="text-xs text-gray-500">Virtual accounts</p>
                        </div>
                    </div>
                    <div class="flex-1 flex flex-col justify-end text-center">
                        <div class="text-2xl font-bold text-gray-900">856</div>
                        <div class="text-xs text-green-600">+5 today</div>
                    </div>
                </div>
            </section>

            <!-- 总资产总额 -->
            <section class="lg:col-span-6 gradient-card rounded-xl p-3 md:p-4">
                <div class="flex flex-col">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-2">
                            <div class="p-2 rounded-lg bg-white/10 backdrop-blur-sm">
                                <i class="fas fa-chart-line text-lg text-white"></i>
                            </div>
                            <div>
                                <h2 class="text-base font-semibold text-white leading-tight">Balance Overview</h2>
                                <p class="text-xs text-white/80">Real-time balance</p>
                            </div>
                        </div>
                        <!-- 币种选择器 -->
                        <div class="flex flex-col items-end">
                            <div class="relative">
                                <button id="assetCurrencyBtn" class="flex items-center space-x-1 px-2 py-1 text-xs text-white bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm">
                                    <span id="selectedCurrency" class="font-medium">USD</span>
                                    <i class="fas fa-chevron-down text-xs transition-transform duration-200"></i>
                                </button>
                                <div id="assetCurrencyDropdown" class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg py-2 hidden z-20">
                                    <button class="w-full px-4 py-2.5 text-left text-sm text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors duration-200" data-currency="USD" data-symbol="$">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/us.svg" class="w-5 h-5 rounded-full mr-3" alt="USD">
                                            <div>
                                                <span class="font-medium">USD</span>
                                                <span class="text-gray-500 text-xs ml-2">US Dollar</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2.5 text-left text-sm text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors duration-200" data-currency="CNH" data-symbol="¥">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/cn.svg" class="w-5 h-5 rounded-full mr-3" alt="CNH">
                                            <div>
                                                <span class="font-medium">CNH</span>
                                                <span class="text-gray-500 text-xs ml-2">Offshore RMB</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2.5 text-left text-sm text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors duration-200" data-currency="EUR" data-symbol="€">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/eu.svg" class="w-5 h-5 rounded-full mr-3" alt="EUR">
                                            <div>
                                                <span class="font-medium">EUR</span>
                                                <span class="text-gray-500 text-xs ml-2">Euro</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2.5 text-left text-sm text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors duration-200" data-currency="GBP" data-symbol="£">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/gb.svg" class="w-5 h-5 rounded-full mr-3" alt="GBP">
                                            <div>
                                                <span class="font-medium">GBP</span>
                                                <span class="text-gray-500 text-xs ml-2">British Pound</span>
                                            </div>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-2">
                        <div class="bg-white/10 backdrop-blur-sm rounded-lg py-2 px-2 flex flex-col items-center justify-center">
                            <div class="flex flex-col items-center w-full">
                                <div class="text-xs font-medium text-white/80 mb-1 flex items-center gap-1 justify-center">
                                    Total
                                    <button id="totalAssetsTooltip" class="ml-1 text-white/80 hover:text-white transition-colors duration-200">
                                        <i class="fas fa-circle-info text-xs"></i>
                                    </button>
                                </div>
                                <div class="text-lg font-bold text-white" id="totalAssetsValue">
                                    <span class="currency-symbol">$</span>0.00
                                </div>
                            </div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-sm rounded-lg py-2 px-2 flex flex-col items-center">
                            <div class="text-xs font-medium text-white/80 mb-1">Available</div>
                            <div class="text-lg font-bold text-white" id="availableAssetsValue">
                                <span class="currency-symbol">$</span>0.00
                            </div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-sm rounded-lg py-2 px-2 flex flex-col items-center">
                            <div class="text-xs font-medium text-white/80 mb-1 flex items-center gap-1 justify-center">
                                Unsettle
                                <button id="unsettleAssetsTooltip" class="ml-1 text-white/80 hover:text-white transition-colors duration-200">
                                    <i class="fas fa-circle-info text-xs"></i>
                                </button>
                            </div>
                            <div class="text-lg font-bold text-white" id="unavailableAssetsValue">
                                <span class="currency-symbol">$</span>0.00
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 账户总览 - 列表样式 -->
            <section class="lg:col-span-12 bg-white rounded-xl shadow-sm overflow-hidden">
                <div class="p-5 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-800">Account Details</h3>
                    <div class="flex items-center space-x-3">
                        <button class="px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200 flex items-center gap-2 hidden" onclick="window.location.href='withdrawal.html'">
                            <i class="fas fa-download text-sm"></i>
                            Withdraw
                        </button>
                        <button class="px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200 flex items-center gap-2 hidden" onclick="window.location.href='payment.html'">
                            <i class="fas fa-paper-plane text-sm"></i>
                            Pay
                        </button>
                        <div class="relative">
                            <button id="currencyFilterBtn" class="flex items-center space-x-2 px-3 py-1.5 text-sm text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                                <div id="selectedFilter" class="flex items-center">
                                    <span>All Currencies</span>
                                </div>
                                <i class="fas fa-chevron-down text-xs transition-transform duration-200"></i>
                            </button>
                            <div id="currencyFilterDropdown" class="absolute right-0 top-full mt-1 w-56 bg-white rounded-lg shadow-lg py-2 hidden z-20">
                                <div class="px-3 pb-2">
                                    <div class="relative">
                                        <input type="text" 
                                               id="currencySearch" 
                                               class="w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-blue-500" 
                                               placeholder="Search currencies..."
                                        >
                                        <i class="fas fa-search absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
                                    </div>
                                </div>
                                <div class="border-t border-gray-100"></div>
                                <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 cursor-pointer" data-filter="all">
                                    All Currencies
                                </button>
                                <div class="border-t border-gray-100 my-1"></div>
                                <div id="currencyList" class="max-h-64 overflow-y-auto">
                                    <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 cursor-pointer" data-filter="CNH">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/cn.svg" class="w-4 h-4 rounded-full mr-2" alt="CNH">
                                            <div>
                                                <span class="font-medium">CNH</span>
                                                <span class="text-gray-500 ml-1">Offshore RMB</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 cursor-pointer" data-filter="USD">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/us.svg" class="w-4 h-4 rounded-full mr-2" alt="USD">
                                            <div>
                                                <span class="font-medium">USD</span>
                                                <span class="text-gray-500 ml-1">US Dollar</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 cursor-pointer" data-filter="EUR">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/eu.svg" class="w-4 h-4 rounded-full mr-2" alt="EUR">
                                            <div>
                                                <span class="font-medium">EUR</span>
                                                <span class="text-gray-500 ml-1">Euro</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 cursor-pointer" data-filter="GBP">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/gb.svg" class="w-4 h-4 rounded-full mr-2" alt="GBP">
                                            <div>
                                                <span class="font-medium">GBP</span>
                                                <span class="text-gray-500 ml-1">British Pound</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 cursor-pointer" data-filter="JPY">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/jp.svg" class="w-4 h-4 rounded-full mr-2" alt="JPY">
                                            <div>
                                                <span class="font-medium">JPY</span>
                                                <span class="text-gray-500 ml-1">Japanese Yen</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 cursor-pointer" data-filter="HKD">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/hk.svg" class="w-4 h-4 rounded-full mr-2" alt="HKD">
                                            <div>
                                                <span class="font-medium">HKD</span>
                                                <span class="text-gray-500 ml-1">Hong Kong Dollar</span>
                                            </div>
                                        </div>
                                    </button>
                                    <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 cursor-pointer" data-filter="SGD">
                                        <div class="flex items-center">
                                            <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/sg.svg" class="w-4 h-4 rounded-full mr-2" alt="SGD">
                                            <div>
                                                <span class="font-medium">SGD</span>
                                                <span class="text-gray-500 ml-1">Singapore Dollar</span>
                                            </div>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="table-header">
                                <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Currency</th>
                                <th class="px-5 py-4 text-right text-sm font-medium text-gray-600">Available Amount</th>
                                <th class="px-5 py-4 text-right text-sm font-medium text-gray-600">
                                    <div class="flex items-center justify-end">
                                        Unsettle Amount
                                        <button id="unavailableTooltip" class="ml-1 text-gray-400 hover:text-gray-600">
                                            <i class="fas fa-circle-info text-xs"></i>
                                        </button>
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="mainCurrencyList">
                            <!-- 主要币种列表将由JavaScript动态生成 -->
                        </tbody>
                        <tbody id="moreCurrencyList" class="hidden">
                            <!-- 更多币种列表将由JavaScript动态生成 -->
                        </tbody>
                    </table>
                </div>
                <div class="p-4 border-t border-gray-100 text-center">
                    <button id="toggleCurrencies" style="color: #7D33FF;" class="text-sm font-medium flex items-center justify-center mx-auto hover:opacity-80">
                        <span class="show-more">Show More Currencies</span>
                        <span class="show-less hidden">Hide Currency List</span>
                        <i class="fas fa-chevron-down ml-2 currency-toggle"></i>
                    </button>
                </div>
            </section>

            <!-- 近期交易 -->
            <!-- 已移除Recent Transactions板块 -->

            <!-- 银行账户内容 -->
            <div id="bank-accounts-content" class="grid grid-cols-1 lg:grid-cols-12 gap-6 hidden">
                <!-- 统计概况 -->
                <section class="lg:col-span-12 bg-white rounded-xl shadow-sm p-5">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="flex items-center gap-3 text-lg font-semibold text-gray-800">
                            <div class="p-2 rounded-lg" style="background-color: rgba(125, 51, 255, 0.1);">
                                <i class="fas fa-chart-pie" style="color: #7D33FF;"></i>
                            </div>
                            Overview
                        </h2>
                    </div>

                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                        <!-- 总开卡数统计 -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm text-gray-600">Total Cards Opened</span>
                                <i class="fas fa-credit-card text-purple-600"></i>
                            </div>
                            <div class="text-2xl font-bold text-gray-900">50<span class="text-sm font-normal text-gray-500 ml-1"> cards</span></div>
                        </div>

                        <!-- 总持有人数 -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm text-gray-600">Total Holders</span>
                                <i class="fas fa-users text-purple-600"></i>
                            </div>
                            <div class="text-2xl font-bold text-gray-900">8<span class="text-sm font-normal text-gray-500 ml-1"> people</span></div>
                        </div>

                        <!-- 银行数量 -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm text-gray-600">Number of Banks</span>
                                <i class="fas fa-university text-purple-600"></i>
                            </div>
                            <div class="text-2xl font-bold text-gray-900">12<span class="text-sm font-normal text-gray-500 ml-1"> banks</span></div>
                        </div>

                        <!-- 本月即将注销 -->
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm text-gray-600">To Be Cancelled This Month</span>
                                <i class="fas fa-exclamation-circle text-yellow-500"></i>
                            </div>
                            <div class="text-2xl font-bold text-gray-900">3<span class="text-sm font-normal text-gray-500 ml-1"> cards</span></div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mt-4">
                        <!-- 银行开卡TOP3 -->
                        <div class="border border-gray-100 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-sm font-medium text-gray-700">Bank Card Opening List</h3>
                                <button class="text-xs text-purple-600 hover:text-purple-800" data-modal="bankStats">View All</button>
                            </div>
                            <div class="space-y-2">
                                <div class="flex items-center justify-between py-2">
                                    <div class="flex items-center gap-2">
                                        <span class="text-sm text-gray-900">Bank of America</span>
                                    </div>
                                    <span class="text-sm font-medium text-purple-600">12 cards</span>
                                </div>
                                <div class="flex items-center justify-between py-2">
                                    <div class="flex items-center gap-2">
                                        <span class="text-sm text-gray-900">Chase Bank</span>
                                    </div>
                                    <span class="text-sm font-medium text-purple-600">8 cards</span>
                                </div>
                            </div>
                        </div>

                        <!-- 持有人开卡TOP3 -->
                        <div class="border border-gray-100 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-sm font-medium text-gray-700">Cardholder Opening List</h3>
                                <button class="text-xs text-purple-600 hover:text-purple-800" data-modal="holderStats">View All</button>
                            </div>
                            <div class="space-y-2">
                                <div class="flex items-center justify-between py-2">
                                    <div class="flex items-center gap-2">
                                        <span class="text-sm text-gray-900">Shanshan Zhang</span>
                                        <span class="text-xs text-gray-500">Main Account</span>
                                    </div>
                                    <span class="text-sm font-medium text-purple-600">15 cards</span>
                                </div>
                                <div class="flex items-center justify-between py-2">
                                    <div class="flex items-center gap-2">
                                        <span class="text-sm text-gray-900">Li Wei</span>
                                        <span class="text-xs text-gray-500">Holder</span>
                                    </div>
                                    <span class="text-sm font-medium text-purple-600">5 cards</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 银行账户明细 -->
                <section class="lg:col-span-12 bg-white rounded-xl shadow-sm overflow-hidden">
                    <div class="p-5 border-b border-gray-100 flex justify-between items-center">
                        <h3 class="text-lg font-medium text-gray-800">Bank Accounts</h3>
                        <div class="flex items-center gap-3">
                            <button id="batchExtendBtn" class="px-4 py-2 text-sm text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors duration-200">
                                Batch Extend
                            </button>
                            <button id="batchCancelBtn" class="px-4 py-2 text-sm text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors duration-200">
                                Batch Cancel
                            </button>
                        </div>
                    </div>

                    <!-- 查询条件部分 -->
                    <div class="bg-white rounded-lg shadow-sm mb-3">
                        <div class="p-3">
                            <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                                <!-- 银行名称 -->
                                <div class="relative">
                                    <label class="inline-block text-xs text-gray-500 mb-1">Bank Name</label>
                                    <select class="block w-full pl-2 pr-8 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 rounded-md">
                                        <option>All</option>
                                        <option>Bank of America</option>
                                        <option>Chase Bank</option>
                                        <option>Citibank</option>
                                        <option>Wells Fargo</option>
                                    </select>
                                </div>
                                <!-- 业务类型 -->
                                <div class="relative">
                                    <label class="inline-block text-xs text-gray-500 mb-1">Business Type</label>
                                    <select class="block w-full pl-2 pr-8 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 rounded-md">
                                        <option>All</option>
                                        <option>E-commerce Platform</option>
                                        <option>Independent Site</option>
                                        <option>Foreign Trade Collection</option>
                                        <option>Service Trade</option>
                                        <option>Business Card</option>
                                    </select>
                                </div>
                                <!-- 平台名称 -->
                                <div class="relative">
                                    <label class="inline-block text-xs text-gray-500 mb-1">Platform Name</label>
                                    <select class="block w-full pl-2 pr-8 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 rounded-md">
                                        <option>All</option>
                                        <option>Amazon US</option>
                                        <option>Shopify</option>
                                        <option>Foreign Trade Collection</option>
                                    </select>
                                </div>
                                <!-- 持有人 -->
                                <div class="relative">
                                    <label class="inline-block text-xs text-gray-500 mb-1">Holder</label>
                                    <select class="block w-full pl-2 pr-8 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 rounded-md">
                                        <option>All</option>
                                        <option>Shanshan Zhang</option>
                                        <option>Li Wei</option>
                                    </select>
                                </div>
                                <!-- 状态 -->
                                <div class="relative">
                                    <label class="inline-block text-xs text-gray-500 mb-1">Status</label>
                                    <select class="block w-full pl-2 pr-8 py-1.5 text-sm border border-gray-200 focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 rounded-md">
                                        <option>All</option>
                                        <option>Opening</option>
                                        <option>Card Failed</option>
                                        <option>Activating</option>
                                        <option>Active</option>
                                        <option>Inactive</option>
                                        <option>Activation Failed</option>
                                        <option>Cancelling</option>
                                        <option>Cancelled</option>
                                        <option>Disabled</option>
                                    </select>
                                </div>
                            </div>
                            <!-- 复选框和按钮 -->
                            <div class="flex items-center justify-between mt-3">
                                <div class="flex items-center space-x-4">
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" class="form-checkbox h-3.5 w-3.5 text-purple-600 rounded">
                                        <span class="ml-1.5 text-xs text-gray-500">Only Auto Renewal</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" class="form-checkbox h-3.5 w-3.5 text-purple-600 rounded">
                                        <span class="ml-1.5 text-xs text-gray-500">To Be Cancelled</span>
                                    </label>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button type="button" class="px-2.5 py-1 text-xs border border-gray-200 rounded text-gray-500 bg-white hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-purple-500">
                                        Reset
                                    </button>
                                    <button type="button" class="px-2.5 py-1 text-xs rounded text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-1 focus:ring-purple-500">
                                        Search
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 表格部分保持不变 -->
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="table-header">
                                    <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Bank Name</th>
                                    <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Business Type</th>
                                    <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Platform Name</th>
                                    <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Account Name</th>
                                    <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Card Number</th>
                                    <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Currency</th>
                                    <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Cancellation Date</th>
                                    <th class="px-5 py-4 text-center text-sm font-medium text-gray-600">Auto Renewal</th>
                                    <th class="px-5 py-4 text-left text-sm font-medium text-gray-600">Status</th>
                                    <th class="px-5 py-4 text-center text-sm font-medium text-gray-600">Action</th>
                                </tr>
                            </thead>
                            <tbody id="bankAccountsList">
                                <!-- 示例数据 - 正常状态 -->
                                <tr class="border-b border-gray-100">
                                    <td class="px-5 py-4">
                                        <div class="flex items-center">
                                            <span class="font-medium text-gray-900">Bank of America</span>
                                        </div>
                                    </td>
                                    <td class="px-5 py-4 text-sm text-gray-600">E-commerce Platform</td>
                                    <td class="px-5 py-4 text-sm text-gray-600">Amazon US</td>
                                    <td class="px-5 py-4 text-sm text-gray-600">Shanshan Zhang</td>
                                    <td class="px-5 py-4 text-sm text-gray-600">****4567</td>
                                    <td class="px-5 py-4 text-sm text-gray-600">USD</td>
                                    <td class="px-5 py-4 text-sm text-gray-600">2024-12-31</td>
                                    <td class="px-5 py-4 text-center">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Enabled
                                        </span>
                                    </td>
                                    <td class="px-5 py-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Active
                                        </span>
                                    </td>
                                    <td class="px-5 py-4">
                                        <div class="flex items-center justify-center space-x-2">
                                            <a href="foreign-trade-account-details.html" class="text-sm text-purple-600 hover:text-purple-800">Details</a>
                                            <div x-data="{ open: false }" class="relative inline-block text-left">
                                                <button @click="open = !open" type="button" class="text-sm text-purple-600 hover:text-purple-800 inline-flex items-center">
                                                    More
                                                    <svg class="w-4 h-4 ml-1" :class="{ 'transform rotate-180': open }" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                    </svg>
                                                </button>
                                                <div x-show="open" 
                                                     @click.away="open = false"
                                                     x-transition:enter="transition ease-out duration-100"
                                                     x-transition:enter-start="transform opacity-0 scale-95"
                                                     x-transition:enter-end="transform opacity-100 scale-100"
                                                     x-transition:leave="transition ease-in duration-75"
                                                     x-transition:leave-start="transform opacity-100 scale-100"
                                                     x-transition:leave-end="transform opacity-0 scale-95"
                                                     class="absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg py-2 z-10"
                                                     style="display: none;">
                                                    <button onclick="window.location.href='extend-expiry.html'" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Extend Cancellation</button>
                                                <button onclick="showCancelConfirmation(this)" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100" data-account="****4567" data-name="Shanshan Zhang">Cancel</button>
                                                <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Enable Auto Renewal</button>
                                                <button onclick="window.location.href='bank-statement.html'" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Generate Bank Statement</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <!-- Citibank - 正常状态 -->
                            <tr class="border-b border-gray-100">
                                <td class="px-5 py-4">
                                    <div class="flex items-center">
                                        <span class="font-medium text-gray-900">Citibank</span>
                                    </div>
                                </td>
                                <td class="px-5 py-4 text-sm text-gray-600">Foreign Trade Collection</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Foreign Trade Collection</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Shanshan Zhang</td>
                                <td class="px-5 py-4 text-sm text-gray-600">****3456</td>
                                <td class="px-5 py-4 text-sm text-gray-600">USD</td>
                                <td class="px-5 py-4 text-sm text-gray-600">-</td>
                                <td class="px-5 py-4 text-center">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Enabled
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Active
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <div class="flex items-center justify-center space-x-2">
                                        <a href="foreign-trade-account-details.html" class="text-sm text-purple-600 hover:text-purple-800">Details</a>
                                        <div x-data="{ open: false }" class="relative inline-block text-left">
                                            <button @click="open = !open" type="button" class="text-sm text-purple-600 hover:text-purple-800 inline-flex items-center">
                                                More
                                                <svg class="w-4 h-4 ml-1" :class="{ 'transform rotate-180': open }" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                </svg>
                                            </button>
                                            <div x-show="open" 
                                                 @click.away="open = false"
                                                 x-transition:enter="transition ease-out duration-100"
                                                 x-transition:enter-start="transform opacity-0 scale-95"
                                                 x-transition:enter-end="transform opacity-100 scale-100"
                                                 x-transition:leave="transition ease-in duration-75"
                                                 x-transition:leave-start="transform opacity-100 scale-100"
                                                 x-transition:leave-end="transform opacity-0 scale-95"
                                                 class="absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg py-2 z-10"
                                                 style="display: none;">
                                                <button onclick="window.location.href='extend-expiry.html'" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Extend Cancellation</button>
                                                <button onclick="showCancelConfirmation(this)" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100" data-account="****3456" data-name="Shanshan Zhang">Cancel</button>
                                                <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Enable Auto Renewal</button>
                                                <button onclick="window.location.href='bank-statement.html'" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Generate Bank Statement</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <!-- 示例数据 - 未激活状态 -->
                            <tr class="border-b border-gray-100">
                                <td class="px-5 py-4">
                                    <div class="flex items-center">
                                        <span class="font-medium text-gray-900">Wells Fargo</span>
                                    </div>
                                </td>
                                <td class="px-5 py-4 text-sm text-gray-600">E-commerce Platform</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Amazon US</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Li Wei</td>
                                <td class="px-5 py-4 text-sm text-gray-600">****7890</td>
                                <td class="px-5 py-4 text-sm text-gray-600">USD</td>
                                <td class="px-5 py-4 text-sm text-gray-600">2024-11-30</td>
                                <td class="px-5 py-4 text-center">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Disabled
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Active
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <div class="flex items-center justify-center space-x-2">
                                        <a href="foreign-trade-account-details.html" class="text-sm text-purple-600 hover:text-purple-800">Details</a>
                                        <div x-data="{ open: false }" class="relative inline-block text-left">
                                            <button @click="open = !open" type="button" class="text-sm text-purple-600 hover:text-purple-800 inline-flex items-center">
                                                More
                                                <svg class="w-4 h-4 ml-1" :class="{ 'transform rotate-180': open }" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                                </svg>
                                            </button>
                                            <div x-show="open" 
                                                 @click.away="open = false"
                                                 x-transition:enter="transition ease-out duration-100"
                                                 x-transition:enter-start="transform opacity-0 scale-95"
                                                 x-transition:enter-end="transform opacity-100 scale-100"
                                                 x-transition:leave="transition ease-in duration-75"
                                                 x-transition:leave-start="transform opacity-100 scale-100"
                                                 x-transition:leave-end="transform opacity-0 scale-95"
                                                 class="absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg py-2 z-10"
                                                 style="display: none;">
                                                <button onclick="window.location.href='extend-expiry.html'" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Extend Cancellation</button>
                                                <button onclick="showCancelConfirmation(this)" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100" data-account="****7890" data-name="Li Wei">Cancel</button>
                                                <button class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Enable Auto Renewal</button>
                                                <button onclick="window.location.href='bank-statement.html'" class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100">Generate Bank Statement</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <!-- 新增已注销记录 1 -->
                            <tr class="border-b border-gray-100">
                                <td class="px-5 py-4">
                                    <div class="flex items-center">
                                        <span class="font-medium text-gray-900">Bank of America</span>
                                    </div>
                                </td>
                                <td class="px-5 py-4 text-sm text-gray-600">Independent Site</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Shopify</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Shanshan Zhang</td>
                                <td class="px-5 py-4 text-sm text-gray-600">****2345</td>
                                <td class="px-5 py-4 text-sm text-gray-600">USD</td>
                                <td class="px-5 py-4 text-sm text-gray-600">-</td>
                                <td class="px-5 py-4 text-center">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Disabled
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Cancelled
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <div class="flex items-center justify-center">
                                        <a href="foreign-trade-account-details.html" class="text-sm text-purple-600 hover:text-purple-800">Details</a>
                                    </div>
                                </td>
                            </tr>

                            <!-- 新增已注销记录 2 -->
                            <tr class="border-b border-gray-100">
                                <td class="px-5 py-4">
                                    <div class="flex items-center">
                                        <span class="font-medium text-gray-900">Chase Bank</span>
                                    </div>
                                </td>
                                <td class="px-5 py-4 text-sm text-gray-600">E-commerce Platform</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Amazon US</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Li Wei</td>
                                <td class="px-5 py-4 text-sm text-gray-600">****9012</td>
                                <td class="px-5 py-4 text-sm text-gray-600">USD</td>
                                <td class="px-5 py-4 text-sm text-gray-600">-</td>
                                <td class="px-5 py-4 text-center">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Disabled
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Cancelled
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <div class="flex items-center justify-center">
                                        <a href="foreign-trade-account-details.html" class="text-sm text-purple-600 hover:text-purple-800">Details</a>
                                    </div>
                                </td>
                            </tr>

                            <!-- 新增已注销记录 3 -->
                            <tr class="border-b border-gray-100">
                                <td class="px-5 py-4">
                                    <div class="flex items-center">
                                        <span class="font-medium text-gray-900">Wells Fargo</span>
                                    </div>
                                </td>
                                <td class="px-5 py-4 text-sm text-gray-600">Foreign Trade Collection</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Foreign Trade Collection</td>
                                <td class="px-5 py-4 text-sm text-gray-600">Shanshan Zhang</td>
                                <td class="px-5 py-4 text-sm text-gray-600">****5678</td>
                                <td class="px-5 py-4 text-sm text-gray-600">USD</td>
                                <td class="px-5 py-4 text-sm text-gray-600">-</td>
                                <td class="px-5 py-4 text-center">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Disabled
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Cancelled
                                    </span>
                                </td>
                                <td class="px-5 py-4">
                                    <div class="flex items-center justify-center">
                                        <a href="foreign-trade-account-details.html" class="text-sm text-purple-600 hover:text-purple-800">Details</a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="p-4 border-t border-gray-100">
                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-500">
                            共 <span class="font-medium text-gray-900">20</span> 条记录
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm text-gray-500 bg-gray-100 rounded-lg hover:bg-gray-200">
                                上一页
                            </button>
                            <button class="px-3 py-1 text-sm text-white bg-purple-600 rounded-lg">1</button>
                            <button class="px-3 py-1 text-sm text-gray-500 hover:text-purple-600">2</button>
                            <button class="px-3 py-1 text-sm text-gray-500 hover:text-purple-600">3</button>
                            <button class="px-3 py-1 text-sm text-gray-500 bg-gray-100 rounded-lg hover:bg-gray-200">
                                下一页
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- 银行开卡统计弹框 -->
    <div id="bankStatsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-lg">
            <div class="bg-white rounded-xl shadow-lg">
                <!-- 弹框标题 -->
                <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-800">Bank Card Opening Statistics</h3>
                    <button onclick="document.getElementById('bankStatsModal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <!-- 弹框内容 -->
                <div class="p-6">
                    <div class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- 银行列表 -->
                        <div class="flex items-center justify-between py-3 border-b border-gray-100">
                            <div class="flex items-center">
                                <span class="text-sm text-gray-900">Bank of America</span>
                            </div>
                            <span class="text-sm font-medium">12 cards</span>
                        </div>
                        <div class="flex items-center justify-between py-3 border-b border-gray-100">
                            <div class="flex items-center">
                                <span class="text-sm text-gray-900">Chase Bank</span>
                            </div>
                            <span class="text-sm font-medium">8 cards</span>
                        </div>
                        <div class="flex items-center justify-between py-3 border-b border-gray-100">
                            <div class="flex items-center">
                                <span class="text-sm text-gray-900">Wells Fargo</span>
                            </div>
                            <span class="text-sm font-medium">6 cards</span>
                        </div>
                        <div class="flex items-center justify-between py-3 border-b border-gray-100">
                            <div class="flex items-center">
                                <span class="text-sm text-gray-900">Citibank</span>
                            </div>
                            <span class="text-sm font-medium">5 cards</span>
                        </div>
                        <div class="flex items-center justify-between py-3 border-b border-gray-100">
                            <div class="flex items-center">
                                <span class="text-sm text-gray-900">Capital One</span>
                            </div>
                            <span class="text-sm font-medium">4 cards</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 持有人开卡统计弹框 -->
    <div id="holderStatsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-lg">
            <div class="bg-white rounded-xl shadow-lg">
                <!-- 弹框标题 -->
                <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-800">Cardholder Opening Statistics</h3>
                    <button class="text-gray-400 hover:text-gray-600" onclick="document.getElementById('holderStatsModal').classList.add('hidden')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <!-- 弹框内容 -->
                <div class="p-6">
                    <div class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- 持有人列表 -->
                        <div class="flex items-center justify-between py-3 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded-full bg-purple-100 flex items-center justify-center">
                                    <i class="fas fa-user text-xs text-purple-600"></i>
                                </div>
                                <div>
                                    <span class="text-sm text-gray-900">Shanshan Zhang</span>
                                    <span class="text-xs text-gray-500 ml-1">Main Account</span>
                                </div>
                            </div>
                            <span class="text-sm font-medium">15 cards</span>
                        </div>
                        <div class="flex items-center justify-between py-3 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <div class="w-6 h-6 rounded-full bg-purple-100 flex items-center justify-center">
                                    <i class="fas fa-user text-xs text-purple-600"></i>
                                </div>
                                <div>
                                    <span class="text-sm text-gray-900">Li Wei</span>
                                    <span class="text-xs text-gray-500 ml-1">Holder</span>
                                </div>
                            </div>
                            <span class="text-sm font-medium">5 cards</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 批量延长弹窗 -->
    <div id="batchExtendModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl">
            <div class="bg-white rounded-xl shadow-lg">
                <!-- 弹窗标题 -->
                <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-800">Batch Extend Cancellation Date</h3>
                    <button onclick="document.getElementById('batchExtendModal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <!-- 穿梭框主体 -->
                <div class="p-6">
                    <div class="grid grid-cols-2 gap-8">
                        <!-- 左侧待选列表 -->
                        <div class="flex flex-col h-[500px] border border-gray-200 rounded-lg">
                            <div class="p-4 border-b border-gray-100">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm text-gray-600">To Select<span class="text-gray-400 ml-1">3 items</span></span>
                                </div>
                                <div class="space-y-2">
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="relative">
                                            <select class="w-full pl-3 pr-8 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500 appearance-none bg-white">
                                                <option value="">Select Platform</option>
                                                <option value="amazon">Amazon</option>
                                                <option value="shopify">Shopify</option>
                                                <option value="trade">Foreign Trade Collection</option>
                                            </select>
                                            <i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none"></i>
                                        </div>
                                        <div class="relative">
                                            <input type="text" 
                                                   placeholder="Cancellation Date" 
                                                   class="w-full pl-3 pr-8 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500">
                                        </div>
                                    </div>
                                    <div class="relative">
                                        <input type="text" 
                                               placeholder="Fuzzy Search" 
                                               class="w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500">
                                        <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="flex-1 overflow-hidden flex flex-col min-h-0">
                                <div class="p-4 border-b border-gray-100">
                                    <div class="flex items-center">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" class="form-checkbox text-purple-600 rounded">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900 w-32">Account</span>
                                                <span class="text-sm text-gray-600">Account Name</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1 overflow-y-auto p-4">
                                    <div class="space-y-1">
                                        <label class="flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" class="form-checkbox text-purple-600 rounded">
                                                <div class="flex items-center">
                                                    <span class="text-sm text-gray-900 w-32">*******6838</span>
                                                    <span class="text-sm text-gray-600">XIONG FUHAI</span>
                                                </div>
                                            </div>
                                        </label>
                                        <label class="flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" class="form-checkbox text-purple-600 rounded">
                                                <div class="flex items-center">
                                                    <span class="text-sm text-gray-900 w-32">*******1367</span>
                                                    <span class="text-sm text-gray-600">XIONG FUHAI</span>
                                                </div>
                                            </div>
                                        </label>
                                        <label class="flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" class="form-checkbox text-purple-600 rounded">
                                                <div class="flex items-center">
                                                    <span class="text-sm text-gray-900 w-32">*******5883</span>
                                                    <span class="text-sm text-gray-600">XIONG FUHAI</span>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 右侧已选列表 -->
                        <div class="flex flex-col h-[500px] border border-gray-200 rounded-lg">
                            <div class="p-4 border-b border-gray-100">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm text-gray-600">Selected<span class="text-gray-400 ml-1">0 items</span></span>
                                    <span class="text-sm text-gray-400">Up to 600 items per time</span>
                                </div>
                                <div class="relative">
                                    <input type="text" 
                                           placeholder="Fuzzy Search" 
                                           class="w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500">
                                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
                                </div>
                            </div>
                            <div class="flex-1 overflow-hidden flex flex-col min-h-0">
                                <div class="p-4 border-b border-gray-100">
                                    <div class="flex items-center">
                                        <div class="flex items-center ml-8">
                                            <span class="text-sm text-gray-900 w-32">Account</span>
                                            <span class="text-sm text-gray-600">Account Name</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1 overflow-y-auto p-4">
                                    <div class="flex items-center justify-center h-full">
                                        <span class="text-sm text-gray-400">No Data</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 底部按钮 -->
                <div class="px-6 py-4 border-t border-gray-100 flex justify-end gap-2">
                    <button onclick="document.getElementById('batchExtendModal').classList.add('hidden')" 
                            class="px-4 py-2 text-sm text-gray-600 hover:text-gray-900">
                        Cancel
                    </button>
                    <button class="px-4 py-2 text-sm text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors duration-200">
                        Confirm and Pay
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 批量注销弹窗 -->
    <div id="batchCancelModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl">
            <div class="bg-white rounded-xl shadow-lg">
                <!-- 弹窗标题 -->
                <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-800">Batch Cancel</h3>
                    <button onclick="document.getElementById('batchCancelModal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <!-- 穿梭框主体 -->
                <div class="p-6">
                    <div class="grid grid-cols-2 gap-8">
                        <!-- 左侧待选列表 -->
                        <div class="flex flex-col h-[500px] border border-gray-200 rounded-lg">
                            <div class="p-4 border-b border-gray-100">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm text-gray-600">To Select<span class="text-gray-400 ml-1">3 items</span></span>
                                </div>
                                <div class="space-y-2">
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="relative">
                                            <select class="w-full pl-3 pr-8 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500 appearance-none bg-white">
                                                <option value="">Select Platform</option>
                                                <option value="amazon">Amazon</option>
                                                <option value="shopify">Shopify</option>
                                                <option value="trade">Foreign Trade Collection</option>
                                            </select>
                                            <i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none"></i>
                                        </div>
                                        <div class="relative">
                                            <input type="text" 
                                                   placeholder="Cancellation Date" 
                                                   class="w-full pl-3 pr-8 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500">
                                        </div>
                                    </div>
                                    <div class="relative">
                                        <input type="text" 
                                               placeholder="Fuzzy Search" 
                                               class="w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500">
                                        <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="flex-1 overflow-hidden flex flex-col min-h-0">
                                <div class="p-4 border-b border-gray-100">
                                    <div class="flex items-center">
                                        <div class="flex items-center gap-2">
                                            <input type="checkbox" class="form-checkbox text-purple-600 rounded">
                                            <div class="flex items-center">
                                                <span class="text-sm text-gray-900 w-32">Account</span>
                                                <span class="text-sm text-gray-600">Account Name</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1 overflow-y-auto p-4">
                                    <div class="space-y-1">
                                        <label class="flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" class="form-checkbox text-purple-600 rounded">
                                                <div class="flex items-center">
                                                    <span class="text-sm text-gray-900 w-32">*******6838</span>
                                                    <span class="text-sm text-gray-600">XIONG FUHAI</span>
                                                </div>
                                            </div>
                                        </label>
                                        <label class="flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" class="form-checkbox text-purple-600 rounded">
                                                <div class="flex items-center">
                                                    <span class="text-sm text-gray-900 w-32">*******1367</span>
                                                    <span class="text-sm text-gray-600">XIONG FUHAI</span>
                                                </div>
                                            </div>
                                        </label>
                                        <label class="flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer">
                                            <div class="flex items-center gap-2">
                                                <input type="checkbox" class="form-checkbox text-purple-600 rounded">
                                                <div class="flex items-center">
                                                    <span class="text-sm text-gray-900 w-32">*******5883</span>
                                                    <span class="text-sm text-gray-600">XIONG FUHAI</span>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 右侧已选列表 -->
                        <div class="flex flex-col h-[500px] border border-gray-200 rounded-lg">
                            <div class="p-4 border-b border-gray-100">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm text-gray-600">Selected<span class="text-gray-400 ml-1">0 items</span></span>
                                    <span class="text-sm text-gray-400">Up to 50 items per time</span>
                                </div>
                                <div class="relative">
                                    <input type="text" 
                                           placeholder="Fuzzy Search" 
                                           class="w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500">
                                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
                                </div>
                            </div>
                            <div class="flex-1 overflow-hidden flex flex-col min-h-0">
                                <div class="p-4 border-b border-gray-100">
                                    <div class="flex items-center">
                                        <div class="flex items-center ml-8">
                                            <span class="text-sm text-gray-900 w-32">Account</span>
                                            <span class="text-sm text-gray-600">Account Name</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1 overflow-y-auto p-4">
                                    <div class="flex items-center justify-center h-full">
                                        <span class="text-sm text-gray-400">No Data</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 底部按钮 -->
                <div class="px-6 py-4 border-t border-gray-100 flex justify-end gap-2">
                    <button onclick="document.getElementById('batchCancelModal').classList.add('hidden')" 
                            class="px-4 py-2 text-sm text-gray-600 hover:text-gray-900">
                        Cancel
                    </button>
                    <button id="batchCancelNextBtn" class="px-4 py-2 text-sm text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors duration-200">
                        Next
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 批量注销确认弹窗 -->
    <div id="batchCancelConfirmModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl">
            <div class="bg-white rounded-xl shadow-lg">
                <!-- 弹窗标题 -->
                <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-800">Batch Cancel</h3>
                    <button onclick="document.getElementById('batchCancelConfirmModal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <!-- 确认内容 -->
                <div class="p-6">
                    <div id="selectedAccountsInfo" class="mb-4">
                        <p class="text-sm text-gray-800 mb-2">Selected <span id="selectedAccountCount">1</span> account(s) for cancellation, as below</p>
                        <div id="selectedAccountsList" class="text-sm text-gray-700">
                            <p>*******5883</p>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex items-center mb-2">
                            <span class="text-red-500 mr-1">*</span>
                            <label class="text-sm text-gray-700">Cancellation Reason:</label>
                        </div>
                        <div class="relative">
                            <select id="cancelReason" class="w-full pl-3 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500 appearance-none bg-white">
                                <option value="">Please select a reason</option>
                                <option value="1">No longer used</option>
                                <option value="2">Account security concern</option>
                                <option value="3">Switch to other collection service</option>
                                <option value="4">Other reason</option>
                            </select>
                            <i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none"></i>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex items-center mb-2">
                            <span class="text-red-500 mr-1">*</span>
                            <label class="text-sm text-gray-700">Transaction Password:</label>
                        </div>
                        <div class="relative flex items-center">
                            <input type="password" id="transactionPassword" class="w-full pl-3 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500" placeholder="Enter transaction password">
                            <a href="#" class="absolute right-3 text-sm text-purple-500 hover:text-purple-600">Forgot password?</a>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <h4 class="text-sm text-gray-700 mb-2">Reminder:</h4>
                        <ul class="list-disc pl-5 text-sm text-gray-600 space-y-2">
                            <li>Please confirm if there are any pending funds before cancellation. If yes, please confirm receipt before proceeding.</li>
                            <li>After cancellation, the associated store will be automatically unbound.</li>
                            <li>After cancellation, this account will no longer support collection service. Please update your e-commerce platform in time to avoid affecting normal collection.</li>
                            <li class="text-red-500">After successful cancellation, the account cannot be used or recovered. Please operate with caution.</li>
                        </ul>
                    </div>
                </div>

                <!-- 底部按钮 -->
                <div class="px-6 py-4 border-t border-gray-100 flex justify-end gap-2">
                    <button id="batchCancelBackBtn" class="px-4 py-2 text-sm text-gray-600 hover:text-gray-900">
                        Previous
                    </button>
                    <button id="batchCancelConfirmBtn" class="px-4 py-2 text-sm text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors duration-200">
                        Confirm Cancellation
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 单个账户注销确认弹窗 -->
    <div id="singleCancelModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl">
            <div class="bg-white rounded-xl shadow-lg">
                <!-- 弹窗标题 -->
                <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-800">Cancel</h3>
                    <button onclick="document.getElementById('singleCancelModal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <!-- 确认内容 -->
                <div class="p-6">
                    <div class="mb-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Platform Name:</label>
                                <div class="text-sm text-gray-900" id="platformName">Mercari</div>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Bank Account:</label>
                                <div class="text-sm text-gray-900" id="bankAccount">*******6838</div>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Account Name:</label>
                                <div class="text-sm text-gray-900" id="accountName">XIONG FUHAI</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex items-center mb-2">
                            <span class="text-red-500 mr-1">*</span>
                            <label class="text-sm text-gray-700">Cancellation Reason:</label>
                        </div>
                        <div class="relative">
                            <select id="singleCancelReason" class="w-full pl-3 pr-8 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500 appearance-none bg-white">
                                <option value="">Please select a reason</option>
                                <option value="1">No longer used</option>
                                <option value="2">Account security concern</option>
                                <option value="3">Switch to other collection service</option>
                                <option value="4">Other reason</option>
                            </select>
                            <i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none"></i>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex items-center mb-2">
                            <span class="text-red-500 mr-1">*</span>
                            <label class="text-sm text-gray-700">Transaction Password:</label>
                        </div>
                        <div class="relative flex items-center">
                            <input type="password" id="singleTransactionPassword" class="w-full pl-3 pr-24 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500" placeholder="Enter transaction password">
                            <a href="#" class="absolute right-3 text-sm text-purple-600 hover:text-purple-700">Forgot password?</a>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="text-sm text-gray-700 mb-2">Reminder:</h4>
                        <ul class="list-disc pl-5 text-sm text-gray-600 space-y-2">
                            <li>Please confirm if there are any pending funds before cancellation. If yes, please confirm receipt before proceeding.</li>
                            <li>After cancellation, the associated store will be automatically unbound.</li>
                            <li>After cancellation, this account will no longer support collection service. Please update your e-commerce platform in time to avoid affecting normal collection.</li>
                            <li class="text-red-500">After successful cancellation, the account cannot be used or recovered. Please operate with caution.</li>
                        </ul>
                    </div>
                </div>

                <!-- 底部按钮 -->
                <div class="px-6 py-4 border-t border-gray-100 flex justify-end gap-2">
                    <button onclick="document.getElementById('singleCancelModal').classList.add('hidden')" 
                            class="px-4 py-2 text-sm text-gray-600 hover:text-gray-900">
                        Cancel
                    </button>
                    <button onclick="confirmSingleCancel()" 
                            class="px-4 py-2 text-sm text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors duration-200">
                        Confirm Cancellation
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 开启自动续费弹窗 -->
    <div id="enableAutoRenewalModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl">
            <div class="bg-white rounded-xl shadow-lg">
                <!-- 弹窗标题 -->
                <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-800">Enable Auto Renewal</h3>
                    <button onclick="document.getElementById('enableAutoRenewalModal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <!-- 确认内容 -->
                <div class="p-6">
                    <div class="mb-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Platform Name:</label>
                                <div class="text-sm text-gray-900" id="renewalPlatformName">Mercari</div>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Bank Account:</label>
                                <div class="text-sm text-gray-900" id="renewalBankAccount">*******6838</div>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Account Name:</label>
                                <div class="text-sm text-gray-900" id="renewalAccountName">XIONG FUHAI</div>
                            </div>
                            <div>
                                <label class="block text-sm text-gray-600 mb-1">Fee:</label>
                                <div class="text-sm text-gray-900">1.5USD/month</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex items-center mb-2">
                            <span class="text-red-500 mr-1">*</span>
                            <label class="text-sm text-gray-700">Transaction Password:</label>
                        </div>
                        <div class="relative flex items-center">
                            <input type="password" id="renewalTransactionPassword" class="w-full pl-3 pr-24 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-purple-500" placeholder="Enter transaction password">
                            <a href="#" class="absolute right-3 text-sm text-purple-600 hover:text-purple-700">Forgot password?</a>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="text-sm text-gray-700 mb-2">Reminder:</h4>
                        <ul class="list-disc pl-5 text-sm text-gray-600 space-y-2">
                            <li>After enabling auto renewal, the system will automatically deduct the renewal fee and extend the cancellation date by one month before the cancellation date.</li>
                            <li>If there is no USD or insufficient balance, the system will automatically deduct other currencies and convert to USD for payment. If the balance is insufficient, the account will be cancelled.</li>
                            <li>If there is normal collection after auto renewal is enabled, the cancellation date will be automatically extended based on the collection month, and the account balance will not be deducted for extension.</li>
                            <li class="text-red-500">To ensure successful deduction, please keep enough funds in your Whalet account.</li>
                        </ul>
                    </div>
                </div>

                <!-- 底部按钮 -->
                <div class="px-6 py-4 border-t border-gray-100 flex justify-end gap-2">
                    <button onclick="document.getElementById('enableAutoRenewalModal').classList.add('hidden')" 
                            class="px-4 py-2 text-sm text-gray-600 hover:text-gray-900">
                        Cancel
                    </button>
                    <button onclick="confirmEnableAutoRenewal()" 
                            class="px-4 py-2 text-sm text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors duration-200">
                        Confirm Enable
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入 Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <!-- 引入 Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- 引入 Tippy.js 和 Popper.js -->
    <script src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6.3.7/dist/tippy-bundle.umd.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6.3.7/dist/tippy.css" />
    
    <!-- 用户中心下拉菜单脚本 -->
    <script>
        // 用户中心下拉菜单
        document.addEventListener('DOMContentLoaded', function() {
            const userCenterBtn = document.getElementById('userCenterBtn');
            const userCenterDropdown = document.getElementById('userCenterDropdown');
            
            userCenterBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                userCenterDropdown.classList.toggle('hidden');
            });
            
            document.addEventListener('click', function(e) {
                if (!userCenterDropdown.contains(e.target) && e.target !== userCenterBtn) {
                    userCenterDropdown.classList.add('hidden');
                }
            });
        });
    </script>
    
    <!-- 引入自定义脚本 -->
    <script src="../scripts/my-assets.js"></script>

    <!-- Tab切换脚本 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.tab-btn');
            const assetsContent = document.getElementById('assets-content');
            const bankAccountsContent = document.getElementById('bank-accounts-content');

            // Function to activate a specific tab
            function activateTab(tabName) {
                // Remove active class from all tabs
                tabs.forEach(t => t.classList.remove('active'));
                
                // Add active class to the target tab
                const targetTab = Array.from(tabs).find(tab => tab.dataset.tab === tabName);
                if (targetTab) {
                    targetTab.classList.add('active');
                }

                // Show/hide content based on selected tab
                if (tabName === 'assets') {
                    assetsContent.classList.remove('hidden');
                    bankAccountsContent.classList.add('hidden');
                } else if (tabName === 'bank-accounts') {
                    assetsContent.classList.add('hidden');
                    bankAccountsContent.classList.remove('hidden');
                }
            }

            // Check URL hash on page load
            if (window.location.hash === '#bank-accounts') {
                activateTab('bank-accounts');
            }

            // Tab切换逻辑
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    activateTab(tabName);
                    // Update URL hash when tab is clicked
                    if (tabName === 'bank-accounts') {
                        window.location.hash = '#bank-accounts';
                    } else {
                        window.location.hash = '';
                    }
                });
            });

            // 银行开卡统计弹框
            const bankStatsBtn = document.querySelector('[data-modal="bankStats"]');
            const bankStatsModal = document.getElementById('bankStatsModal');
            
            if (bankStatsBtn) {
                bankStatsBtn.addEventListener('click', () => {
                    bankStatsModal.classList.remove('hidden');
                });
            }

            // 持有人开卡统计弹框
            const holderStatsBtn = document.querySelector('[data-modal="holderStats"]');
            const holderStatsModal = document.getElementById('holderStatsModal');
            
            if (holderStatsBtn) {
                holderStatsBtn.addEventListener('click', () => {
                    holderStatsModal.classList.remove('hidden');
                });
            }

            // 批量延长弹框
            const batchExtendBtn = document.getElementById('batchExtendBtn');
            const batchExtendModal = document.getElementById('batchExtendModal');
            
            if (batchExtendBtn) {
                batchExtendBtn.addEventListener('click', () => {
                    batchExtendModal.classList.remove('hidden');
                });
            }

            // 批量注销弹框
            const batchCancelBtn = document.getElementById('batchCancelBtn');
            const batchCancelModal = document.getElementById('batchCancelModal');
            
            if (batchCancelBtn) {
                batchCancelBtn.addEventListener('click', () => {
                    batchCancelModal.classList.remove('hidden');
                });
            }

            // 点击弹框外部关闭弹框
            window.addEventListener('click', (e) => {
                if (e.target === bankStatsModal) {
                    bankStatsModal.classList.add('hidden');
                }
                if (e.target === holderStatsModal) {
                    holderStatsModal.classList.add('hidden');
                }
                if (e.target === batchExtendModal) {
                    batchExtendModal.classList.add('hidden');
                }
                if (e.target === batchCancelModal) {
                    batchCancelModal.classList.add('hidden');
                }
            });
        });
    </script>

    <!-- 穿梭框功能脚本 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 批量注销功能
            const batchCancelModal = document.getElementById('batchCancelModal');
            const batchCancelConfirmModal = document.getElementById('batchCancelConfirmModal');
            const batchCancelBtn = document.getElementById('batchCancelBtn');
            const batchCancelNextBtn = document.getElementById('batchCancelNextBtn');
            const batchCancelBackBtn = document.getElementById('batchCancelBackBtn');
            const batchCancelConfirmBtn = document.getElementById('batchCancelConfirmBtn');
            
            if (batchCancelBtn && batchCancelModal) {
                // 打开批量注销模态框
                batchCancelBtn.addEventListener('click', function() {
                    batchCancelModal.classList.remove('hidden');
                });
                
                // 模态框元素
                const leftItems = batchCancelModal.querySelectorAll('.flex-col:first-child .overflow-y-auto label');
                const leftCheckboxes = batchCancelModal.querySelectorAll('.flex-col:first-child .overflow-y-auto label input[type="checkbox"]');
                const leftCheckAll = batchCancelModal.querySelector('.flex-col:first-child .p-4.border-b input[type="checkbox"]');
                const rightContainer = batchCancelModal.querySelector('.flex-col:nth-child(2) .overflow-y-auto');
                const countElem = batchCancelModal.querySelector('.flex-col:nth-child(2) .text-gray-400');
                
                // 选中的项目
                const selectedItems = [];
                
                // 更新右侧面板
                function updateRightPanel() {
                    // 更新计数
                    if (countElem) {
                        countElem.textContent = selectedItems.length + '条';
                    }
                    
                    // 更新右侧列表
                    if (rightContainer) {
                        if (selectedItems.length === 0) {
                            rightContainer.innerHTML = '<div class="flex items-center justify-center h-full"><span class="text-sm text-gray-400">暂无数据</span></div>';
                        } else {
                            let html = '';
                            selectedItems.forEach(item => {
                                html += `
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg">
                                        <div class="flex items-center">
                                            <span class="text-sm text-gray-900 w-32">${item.account}</span>
                                            <span class="text-sm text-gray-600">${item.name}</span>
                                        </div>
                                        <button class="text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50" 
                                                onclick="removeItem('${item.account}')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                `;
                            });
                            rightContainer.innerHTML = html;
                        }
                    }
                }
                
                // 每个复选框的点击事件
                leftCheckboxes.forEach((checkbox, index) => {
                    checkbox.addEventListener('change', function() {
                        const item = leftItems[index];
                        const account = item.querySelector('.text-gray-900').textContent;
                        const name = item.querySelector('.text-gray-600').textContent;
                        
                        if (this.checked) {
                            // 添加到已选项
                            if (!selectedItems.find(i => i.account === account)) {
                                selectedItems.push({ account, name });
                            }
                        } else {
                            // 从已选项中移除
                            const idx = selectedItems.findIndex(i => i.account === account);
                            if (idx !== -1) {
                                selectedItems.splice(idx, 1);
                            }
                        }
                        
                        updateRightPanel();
                    });
                });
                
                // 全选/取消全选
                if (leftCheckAll) {
                    leftCheckAll.addEventListener('change', function() {
                        const checked = this.checked;
                        
                        leftCheckboxes.forEach((checkbox, index) => {
                            // 避免重复触发change事件
                            if (checkbox.checked !== checked) {
                                checkbox.checked = checked;
                                
                                const item = leftItems[index];
                                const account = item.querySelector('.text-gray-900').textContent;
                                const name = item.querySelector('.text-gray-600').textContent;
                                
                                if (checked) {
                                    // 添加到已选项
                                    if (!selectedItems.find(i => i.account === account)) {
                                        selectedItems.push({ account, name });
                                    }
                                } else {
                                    // 清空已选项
                                    selectedItems.length = 0;
                                }
                            }
                        });
                        
                        updateRightPanel();
                    });
                }
                
                // 删除功能
                window.removeItem = function(account) {
                    // 从已选项中移除
                    const idx = selectedItems.findIndex(i => i.account === account);
                    if (idx !== -1) {
                        selectedItems.splice(idx, 1);
                    }
                    
                    // 更新左侧复选框状态
                    leftCheckboxes.forEach((checkbox, index) => {
                        const item = leftItems[index];
                        const itemAccount = item.querySelector('.text-gray-900').textContent;
                        if (itemAccount === account) {
                            checkbox.checked = false;
                        }
                    });
                    
                    updateRightPanel();
                };
                
                // 下一步按钮点击事件
                if (batchCancelNextBtn) {
                    batchCancelNextBtn.addEventListener('click', function() {
                        if (selectedItems.length === 0) {
                            alert('请选择需要注销的账户');
                            return;
                        }
                        
                        // 更新确认页面上的账户信息
                        const selectedAccountCount = document.getElementById('selectedAccountCount');
                        const selectedAccountsList = document.getElementById('selectedAccountsList');
                        
                        if (selectedAccountCount && selectedAccountsList) {
                            selectedAccountCount.textContent = selectedItems.length;
                            
                            let accountsHtml = '';
                            selectedItems.forEach(item => {
                                accountsHtml += `<p>${item.account}</p>`;
                            });
                            selectedAccountsList.innerHTML = accountsHtml;
                        }
                        
                        // 显示确认页面，隐藏选择页面
                        batchCancelModal.classList.add('hidden');
                        batchCancelConfirmModal.classList.remove('hidden');
                    });
                }
                
                // 上一步按钮点击事件
                if (batchCancelBackBtn) {
                    batchCancelBackBtn.addEventListener('click', function() {
                        batchCancelConfirmModal.classList.add('hidden');
                        batchCancelModal.classList.remove('hidden');
                    });
                }
                
                // 确认注销按钮点击事件
                if (batchCancelConfirmBtn) {
                    batchCancelConfirmBtn.addEventListener('click', function() {
                        const cancelReason = document.getElementById('cancelReason');
                        const transactionPassword = document.getElementById('transactionPassword');
                        
                        // 表单验证
                        if (!cancelReason.value) {
                            alert('请选择注销原因');
                            cancelReason.focus();
                            return;
                        }
                        
                        if (!transactionPassword.value) {
                            alert('请输入交易密码');
                            transactionPassword.focus();
                            return;
                        }
                        
                        // 这里可以添加提交注销请求的代码
                        alert('注销申请已提交，请等待处理结果。');
                        batchCancelConfirmModal.classList.add('hidden');
                        
                        // 重置选择
                        selectedItems.length = 0;
                        updateRightPanel();
                        leftCheckboxes.forEach(checkbox => {
                            checkbox.checked = false;
                        });
                        
                        if (leftCheckAll) {
                            leftCheckAll.checked = false;
                        }
                    });
                }
            }
            
            // 批量延长功能
            const batchExtendModal = document.getElementById('batchExtendModal');
            const batchExtendBtn = document.getElementById('batchExtendBtn');
            
            if (batchExtendBtn && batchExtendModal) {
                // 打开批量延长模态框
                batchExtendBtn.addEventListener('click', function() {
                    batchExtendModal.classList.remove('hidden');
                });
                
                // 模态框元素
                const leftItems = batchExtendModal.querySelectorAll('.flex-col:first-child .overflow-y-auto label');
                const leftCheckboxes = batchExtendModal.querySelectorAll('.flex-col:first-child .overflow-y-auto label input[type="checkbox"]');
                const leftCheckAll = batchExtendModal.querySelector('.flex-col:first-child .p-4.border-b input[type="checkbox"]');
                const rightContainer = batchExtendModal.querySelector('.flex-col:nth-child(2) .overflow-y-auto');
                const countElem = batchExtendModal.querySelector('.flex-col:nth-child(2) .text-gray-400');
                
                // 选中的项目
                const selectedItems = [];
                
                // 更新右侧面板
                function updateRightPanel() {
                    // 更新计数
                    if (countElem) {
                        countElem.textContent = selectedItems.length + '条';
                    }
                    
                    // 更新右侧列表
                    if (rightContainer) {
                        if (selectedItems.length === 0) {
                            rightContainer.innerHTML = '<div class="flex items-center justify-center h-full"><span class="text-sm text-gray-400">暂无数据</span></div>';
                        } else {
                            let html = '';
                            selectedItems.forEach(item => {
                                html += `
                                    <div class="flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg">
                                        <div class="flex items-center">
                                            <span class="text-sm text-gray-900 w-32">${item.account}</span>
                                            <span class="text-sm text-gray-600">${item.name}</span>
                                        </div>
                                        <button class="text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50" 
                                                onclick="removeExtendItem('${item.account}')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                `;
                            });
                            rightContainer.innerHTML = html;
                        }
                    }
                }
                
                // 每个复选框的点击事件
                leftCheckboxes.forEach((checkbox, index) => {
                    checkbox.addEventListener('change', function() {
                        const item = leftItems[index];
                        const account = item.querySelector('.text-gray-900').textContent;
                        const name = item.querySelector('.text-gray-600').textContent;
                        
                        if (this.checked) {
                            // 添加到已选项
                            if (!selectedItems.find(i => i.account === account)) {
                                selectedItems.push({ account, name });
                            }
                        } else {
                            // 从已选项中移除
                            const idx = selectedItems.findIndex(i => i.account === account);
                            if (idx !== -1) {
                                selectedItems.splice(idx, 1);
                            }
                        }
                        
                        updateRightPanel();
                    });
                });
                
                // 全选/取消全选
                if (leftCheckAll) {
                    leftCheckAll.addEventListener('change', function() {
                        const checked = this.checked;
                        
                        leftCheckboxes.forEach((checkbox, index) => {
                            // 避免重复触发change事件
                            if (checkbox.checked !== checked) {
                                checkbox.checked = checked;
                                
                                const item = leftItems[index];
                                const account = item.querySelector('.text-gray-900').textContent;
                                const name = item.querySelector('.text-gray-600').textContent;
                                
                                if (checked) {
                                    // 添加到已选项
                                    if (!selectedItems.find(i => i.account === account)) {
                                        selectedItems.push({ account, name });
                                    }
                                } else {
                                    // 清空已选项
                                    selectedItems.length = 0;
                                }
                            }
                        });
                        
                        updateRightPanel();
                    });
                }
                
                // 删除功能
                window.removeExtendItem = function(account) {
                    // 从已选项中移除
                    const idx = selectedItems.findIndex(i => i.account === account);
                    if (idx !== -1) {
                        selectedItems.splice(idx, 1);
                    }
                    
                    // 更新左侧复选框状态
                    leftCheckboxes.forEach((checkbox, index) => {
                        const item = leftItems[index];
                        const itemAccount = item.querySelector('.text-gray-900').textContent;
                        if (itemAccount === account) {
                            checkbox.checked = false;
                        }
                    });
                    
                    updateRightPanel();
                };
                
                // 确认按钮点击事件
                const confirmBtn = batchExtendModal.querySelector('button.bg-purple-600');
                if (confirmBtn) {
                    confirmBtn.addEventListener('click', function() {
                        // 直接跳转
                        window.location.href = 'extend-expiry.html';
                    });
                }
            }
        });
    </script>

    <script>
    // ... existing code ...

    // 显示单个账户注销确认框
    function showCancelConfirmation(button) {
        const account = button.getAttribute('data-account');
        const name = button.getAttribute('data-name');
        const platformName = button.closest('tr').querySelector('td:nth-child(2)').textContent;
        
        // 更新弹窗信息
        document.getElementById('platformName').textContent = platformName;
        document.getElementById('bankAccount').textContent = account;
        document.getElementById('accountName').textContent = name;
        
        // 重置表单
        document.getElementById('singleCancelReason').value = '';
        document.getElementById('singleTransactionPassword').value = '';
        
        // 显示弹窗
        document.getElementById('singleCancelModal').classList.remove('hidden');
    }

    // 确认单个账户注销
    function confirmSingleCancel() {
        const reason = document.getElementById('singleCancelReason').value;
        const password = document.getElementById('singleTransactionPassword').value;
        
        // 表单验证
        if (!reason) {
            alert('请选择注销原因');
            return;
        }
        
        if (!password) {
            alert('请输入交易密码');
            return;
        }
        
        // 这里可以添加注销请求的代码
        alert('注销申请已提交，请等待处理结果。');
        document.getElementById('singleCancelModal').classList.add('hidden');
    }

    // 显示开启自动续费确认框
    function showEnableAutoRenewal(button) {
        const row = button.closest('tr');
        const platformName = row.querySelector('td:nth-child(2)').textContent;
        const account = row.querySelector('td:nth-child(4)').textContent;
        const name = row.querySelector('td:nth-child(3)').textContent;
        
        // 更新弹窗信息
        document.getElementById('renewalPlatformName').textContent = platformName;
        document.getElementById('renewalBankAccount').textContent = account;
        document.getElementById('renewalAccountName').textContent = name;
        
        // 重置表单
        document.getElementById('renewalTransactionPassword').value = '';
        
        // 显示弹窗
        document.getElementById('enableAutoRenewalModal').classList.remove('hidden');
    }

    // 确认开启自动续费
    function confirmEnableAutoRenewal() {
        const password = document.getElementById('renewalTransactionPassword').value;
        
        // 表单验证
        if (!password) {
            alert('请输入交易密码');
            return;
        }
        
        // 这里可以添加开启自动续费的请求代码
        alert('自动续费已开启');
        document.getElementById('enableAutoRenewalModal').classList.add('hidden');
    }

    // 更新"开启续费"按钮的点击事件
    document.addEventListener('DOMContentLoaded', function() {
        // 获取所有包含"开启续费"文本的按钮
        const buttons = document.querySelectorAll('button');
        buttons.forEach(button => {
            if (button.textContent.trim() === '开启续费') {
                button.onclick = function() {
                    showEnableAutoRenewal(this);
                };
            }
        });
    });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 更新详情链接
            const rows = document.querySelectorAll('#bankAccountsList tr');
            rows.forEach(row => {
                const businessType = row.querySelector('td:nth-child(2)').textContent.trim();
                const detailsLink = row.querySelector('a');
                if (detailsLink) {
                    if (businessType === '外贸收款') {
                        detailsLink.href = 'foreign-trade-account-details.html';
                    } else {
                        detailsLink.href = 'collection-account-details.html';
                    }
                }
            });
        });
    </script>

    <script>
        // Initialize tooltips
        tippy('#totalAssetsTooltip', {
            content: 'System estimated current account total balance based on exchange rates in selected currency, for reference only',
            placement: 'right',
            theme: 'light',
            arrow: true,
            maxWidth: 300,
            animation: 'scale',
            duration: 200
        });

        tippy('#unavailableTooltip', {
            content: 'Your unsettled balance includes funds temporarily held due to pending transactions (such as pending collection transactions).',
            placement: 'top'
        });

        tippy('#unsettleAssetsTooltip', {
            content: 'Your unsettled balance includes funds temporarily held due to pending transactions (such as pending collection transactions).',
            placement: 'top'
        });

        // Currency selector functionality
        const assetCurrencyBtn = document.getElementById('assetCurrencyBtn');
        const assetCurrencyDropdown = document.getElementById('assetCurrencyDropdown');
        const selectedCurrency = document.getElementById('selectedCurrency');
        const currencySymbols = {
            'USD': '$',
            'CNH': '¥',
            'EUR': '€',
            'GBP': '£'
        };

        assetCurrencyBtn.addEventListener('click', () => {
            assetCurrencyDropdown.classList.toggle('hidden');
            const icon = assetCurrencyBtn.querySelector('i');
            icon.style.transform = assetCurrencyDropdown.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
        });

        document.querySelectorAll('#assetCurrencyDropdown button').forEach(button => {
            button.addEventListener('click', () => {
                const currency = button.dataset.currency;
                const symbol = button.dataset.symbol;
                selectedCurrency.textContent = currency;
                document.querySelectorAll('.currency-symbol').forEach(el => {
                    el.textContent = symbol;
                });
                assetCurrencyDropdown.classList.add('hidden');
                const icon = assetCurrencyBtn.querySelector('i');
                icon.style.transform = 'rotate(0deg)';
                // Update composition currency label
                document.getElementById('compositionCurrencyLabel').textContent = currency;
                // Update asset values (mock data)
                updateAssetValues(currency);
            });
        });

        // Currency filter functionality
        const currencyFilterBtn = document.getElementById('currencyFilterBtn');
        const currencyFilterDropdown = document.getElementById('currencyFilterDropdown');
        const selectedFilter = document.getElementById('selectedFilter');
        const currencySearch = document.getElementById('currencySearch');

        currencyFilterBtn.addEventListener('click', () => {
            currencyFilterDropdown.classList.toggle('hidden');
            const icon = currencyFilterBtn.querySelector('i');
            icon.style.transform = currencyFilterDropdown.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
        });

        currencySearch.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            document.querySelectorAll('#currencyList button').forEach(button => {
                const currency = button.dataset.filter;
                const currencyName = button.querySelector('.text-gray-500').textContent.toLowerCase();
                if (currency.toLowerCase().includes(searchTerm) || currencyName.includes(searchTerm)) {
                    button.style.display = '';
                } else {
                    button.style.display = 'none';
                }
            });
        });

        document.querySelectorAll('#currencyFilterDropdown button').forEach(button => {
            button.addEventListener('click', () => {
                const filter = button.dataset.filter;
                if (filter === 'all') {
                    selectedFilter.innerHTML = '<span>All Currencies</span>';
                } else {
                    const currencyName = button.querySelector('.text-gray-500').textContent;
                    selectedFilter.innerHTML = `
                        <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/${filter.toLowerCase() === 'cnh' ? 'cn' : filter.toLowerCase()}.svg" 
                             class="w-4 h-4 rounded-full mr-2" alt="${filter}">
                        <span>${filter}</span>
                    `;
                }
                currencyFilterDropdown.classList.add('hidden');
                const icon = currencyFilterBtn.querySelector('i');
                icon.style.transform = 'rotate(0deg)';
                // Filter currency list (mock data)
                filterCurrencyList(filter);
            });
        });

        // Toggle currencies functionality
        const toggleCurrenciesBtn = document.getElementById('toggleCurrencies');
        const moreCurrencyList = document.getElementById('moreCurrencyList');
        const showMoreSpan = toggleCurrenciesBtn.querySelector('.show-more');
        const showLessSpan = toggleCurrenciesBtn.querySelector('.show-less');
        const currencyToggle = toggleCurrenciesBtn.querySelector('.currency-toggle');

        toggleCurrenciesBtn.addEventListener('click', () => {
            moreCurrencyList.classList.toggle('hidden');
            showMoreSpan.classList.toggle('hidden');
            showLessSpan.classList.toggle('hidden');
            currencyToggle.style.transform = moreCurrencyList.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
        });

        // Mock data for asset values
        function updateAssetValues(currency) {
            const mockData = {
                'USD': { total: 100000, available: 80000, unavailable: 20000 },
                'CNH': { total: 700000, available: 560000, unavailable: 140000 },
                'EUR': { total: 90000, available: 72000, unavailable: 18000 },
                'GBP': { total: 80000, available: 64000, unavailable: 16000 }
            };

            const data = mockData[currency];
            document.getElementById('totalAssetsValue').innerHTML = `<span class="currency-symbol">${currencySymbols[currency]}</span>${data.total.toLocaleString()}`;
            document.getElementById('availableAssetsValue').innerHTML = `<span class="currency-symbol">${currencySymbols[currency]}</span>${data.available.toLocaleString()}`;
            document.getElementById('unavailableAssetsValue').innerHTML = `<span class="currency-symbol">${currencySymbols[currency]}</span>${data.unavailable.toLocaleString()}`;
        }

        // Mock data for currency list
        function filterCurrencyList(filter) {
            const mockData = {
                'CNH': { available: 500000, unavailable: 100000 },
                'USD': { available: 80000, unavailable: 20000 },
                'EUR': { available: 60000, unavailable: 15000 },
                'GBP': { available: 50000, unavailable: 12000 },
                'JPY': { available: 10000000, unavailable: 2000000 },
                'HKD': { available: 600000, unavailable: 150000 },
                'SGD': { available: 100000, unavailable: 25000 }
            };

            const mainList = document.getElementById('mainCurrencyList');
            const moreList = document.getElementById('moreCurrencyList');
            mainList.innerHTML = '';
            moreList.innerHTML = '';

            Object.entries(mockData).forEach(([currency, data], index) => {
                if (filter === 'all' || filter === currency) {
                    const row = document.createElement('tr');
                    row.className = 'hover:bg-gray-50';
                    row.innerHTML = `
                        <td class="px-5 py-4">
                            <div class="flex items-center">
                                <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/${currency.toLowerCase() === 'cnh' ? 'cn' : currency.toLowerCase()}.svg" 
                                     class="w-6 h-6 rounded-full mr-3" alt="${currency}">
                                <div>
                                    <div class="font-medium text-gray-900">${currency}</div>
                                    <div class="text-sm text-gray-500">${getCurrencyName(currency)}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-5 py-4 text-right">
                            <div class="font-medium text-gray-900">${data.available.toLocaleString()}</div>
                        </td>
                        <td class="px-5 py-4 text-right">
                            <div class="font-medium text-gray-900">${data.unavailable.toLocaleString()}</div>
                        </td>
                    `;
                    if (index < 3) {
                        mainList.appendChild(row);
                    } else {
                        moreList.appendChild(row);
                    }
                }
            });
        }

        function getCurrencyName(currency) {
            const names = {
                'CNH': 'Offshore RMB',
                'USD': 'US Dollar',
                'EUR': 'Euro',
                'GBP': 'British Pound',
                'JPY': 'Japanese Yen',
                'HKD': 'Hong Kong Dollar',
                'SGD': 'Singapore Dollar'
            };
            return names[currency];
        }

        // Initialize asset composition chart
        const ctx = document.getElementById('assetComposition').getContext('2d');
        const assetCompositionChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['CNH', 'USD', 'EUR', 'GBP'],
                datasets: [{
                    data: [50, 30, 15, 5],
                    backgroundColor: [
                        '#7D33FF',
                        '#FF6B6B',
                        '#4ECDC4',
                        '#FFD93D'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

        // Mock data for recent transactions
        const recentTransactions = [
            {
                type: 'payment',
                amount: 1000,
                currency: 'USD',
                status: 'completed',
                date: '2024-03-15 14:30',
                description: 'Payment to Supplier A'
            },
            {
                type: 'withdrawal',
                amount: 500,
                currency: 'EUR',
                status: 'processing',
                date: '2024-03-15 10:15',
                description: 'Withdrawal to Bank Account'
            },
            {
                type: 'exchange',
                amount: 2000,
                currency: 'CNH',
                status: 'completed',
                date: '2024-03-14 16:45',
                description: 'Currency Exchange'
            }
        ];

        // Render recent transactions
        const transactionsContainer = document.getElementById('recentTransactions');
        recentTransactions.forEach(transaction => {
            const transactionEl = document.createElement('div');
            transactionEl.className = 'flex items-center justify-between p-4 bg-gray-50 rounded-lg';
            transactionEl.innerHTML = `
                <div class="flex items-center">
                    <div class="p-2 rounded-lg ${getTransactionTypeColor(transaction.type)}">
                        <i class="fas ${getTransactionTypeIcon(transaction.type)}"></i>
                    </div>
                    <div class="ml-4">
                        <div class="font-medium text-gray-900">${transaction.description}</div>
                        <div class="text-sm text-gray-500">${transaction.date}</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="font-medium ${getTransactionAmountColor(transaction.type)}">
                        ${getTransactionAmountPrefix(transaction.type)}${transaction.amount.toLocaleString()} ${transaction.currency}
                    </div>
                    <div class="text-sm ${getTransactionStatusColor(transaction.status)}">
                        ${getTransactionStatusText(transaction.status)}
                    </div>
                </div>
            `;
            transactionsContainer.appendChild(transactionEl);
        });

        function getTransactionTypeColor(type) {
            const colors = {
                'payment': 'bg-blue-100 text-blue-600',
                'withdrawal': 'bg-green-100 text-green-600',
                'exchange': 'bg-purple-100 text-purple-600'
            };
            return colors[type];
        }

        function getTransactionTypeIcon(type) {
            const icons = {
                'payment': 'fa-paper-plane',
                'withdrawal': 'fa-download',
                'exchange': 'fa-exchange-alt'
            };
            return icons[type];
        }

        function getTransactionAmountColor(type) {
            const colors = {
                'payment': 'text-red-600',
                'withdrawal': 'text-red-600',
                'exchange': 'text-gray-900'
            };
            return colors[type];
        }

        function getTransactionAmountPrefix(type) {
            const prefixes = {
                'payment': '-',
                'withdrawal': '-',
                'exchange': ''
            };
            return prefixes[type];
        }

        function getTransactionStatusColor(status) {
            const colors = {
                'completed': 'text-green-600',
                'processing': 'text-yellow-600',
                'failed': 'text-red-600'
            };
            return colors[status];
        }

        function getTransactionStatusText(status) {
            const texts = {
                'completed': 'Completed',
                'processing': 'Processing',
                'failed': 'Failed'
            };
            return texts[status];
        }

        // Initialize with USD
        updateAssetValues('USD');
        filterCurrencyList('all');
    </script>
</body>
</html> 